#!/usr/bin/env bash

# Git shortcuts
alias g="git"
alias gs="git status"
alias gd="git diff"
alias ga="git add"
alias gc="git commit"
alias gp="git push"
alias gl="git log --oneline -20"
alias git-backup="git branch backup-\$(date +'%Y-%m-%d-%H-%M-%S')"

# Quick commit
function yolo_commit() {
    git add .
    git commit -m "."
    git push
}

# Navigation
alias ..="cd .."
alias ...="cd ../.."
alias docs="cd ~/Documents"

# Utils
alias yaml2json="python3 -c 'import json, sys, yaml; y=yaml.safe_load(sys.stdin.read()); json.dump(y, sys.stdout)' && echo"

# OS-specific
case "$(uname -s)" in
    Darwin)
        alias list_ports="netstat -anvp tcp | awk 'NR<3 || /LISTEN/'"
        [[ -r "$(brew --prefix 2>/dev/null)/etc/profile.d/bash_completion.sh" ]] && . "$(brew --prefix)/etc/profile.d/bash_completion.sh"
        ;;
    MINGW*|MSYS*|CYGWIN*)
        alias list_ports="netstat -an | findstr LISTEN"
        alias open="start"
        alias explorer="explorer.exe"
        ;;
    Linux)
        alias list_ports="ss -tuln"
        alias open="xdg-open"
        ;;
esac

# Claude Code with all permissions
alias cc="claude --dangerously-skip-permissions"
alias claude="claude --dangerously-skip-permissions"

# Quick directory jumps
alias dt="cd ~/Desktop"
alias dl="cd ~/Downloads"
alias brain="cd ~/brain"
alias t="cd ~/Documents/terminator"
alias w="cd ~/Documents/workflows"
alias m="cd ~/Documents/mediar-web-app"

# Git faster
alias gco="git checkout"
alias gcb="git checkout -b"
alias gpl="git pull"
alias gst="git stash"
alias gstp="git stash pop"
alias gca="git commit --amend --no-edit"
alias gpf="git push --force-with-lease"

# Quick edit
alias zed.="zed ."
alias z.="zed ."

# GPG keys
alias decrypt="pbpaste | gpg --decrypt"
alias gpg-import="pbpaste | gpg --import"
encrypt() {
    keys=$(gpg --list-keys --keyid-format SHORT 2>/dev/null | grep -E "^pub" | awk '{print $2}')
    if [ -z "$keys" ]; then
        echo "No keys found. Copy a public key and run: gpg-import"
        return 1
    fi
    echo "Available keys:"
    gpg --list-keys --keyid-format SHORT 2>/dev/null | grep -E "^pub|uid"
    echo ""
    read -p "Key ID: " keyid
    echo "Type message (Ctrl+D when done):"
    cat | gpg --encrypt --armor --recipient "$keyid" | pbcopy
    echo "Encrypted to clipboard"
}
alias gpgpub="cat ~/Library/Mobile\ Documents/com~apple~CloudDocs/gpg/new_public.asc"
alias pubkey="cat ~/Library/Mobile\ Documents/com~apple~CloudDocs/gpg/new_public.asc"
alias mykey="cat ~/Library/Mobile\ Documents/com~apple~CloudDocs/gpg/new_public.asc"
alias gpg-public="cat ~/Library/Mobile\ Documents/com~apple~CloudDocs/gpg/new_public.asc"
alias showkey="cat ~/Library/Mobile\ Documents/com~apple~CloudDocs/gpg/new_public.asc"

# Misc
alias cls="clear"
alias h="history | tail -30"
alias path='echo $PATH | tr ":" "\n"'
alias now="date '+%Y-%m-%d %H:%M:%S'"
alias week="date +%V"
